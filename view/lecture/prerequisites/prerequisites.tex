%
% ---------- header -----------------------------------------------------------
%
% project       kaneton
%
% license       kaneton
%
% file          /home/mycure/kane.../lecture/prerequisites/prerequisites.tex
%
% created       julien quintard   [wed may 16 19:41:40 2007]
% updated       julien quintard   [wed may 16 19:41:56 2007]
%

%
% path
%

\def\path{../..}

%
% template
%

\input{\path/template/lecture.tex}

%
% title
%

\title{Prerequisites}

%
% authors
%

\author
{
  Julien~Quintard\inst{1}
}

%
% document
%

\begin{document}

%
% title frame
%

\begin{frame}
  \titlepage

  \begin{center}
    \logos
  \end{center}
\end{frame}

%
% outline frame
%

\begin{frame}
  \frametitle{Outline}
  \tableofcontents
\end{frame}

%
% overview
%

\section{Overview}

% 1)

\begin{frame}
  \frametitle{Description}

  The kaneton project is a very complex project which combined very different
  techniques, concepts, languages etc.

  \-

  We will here quickly see the prerequisites to be sure students will be
  able to success.
\end{frame}

% 2)

\begin{frame}
  \frametitle{List}

  The different prerequisites for the kaneton project are:

  \begin{itemize}[<+->]
    \item
      Advanced makefiles because the kaneton compiling system uses special
      gmake features.
    \item
      C-preprocessor because the kaneton kernel uses it in a very powerful
      and elegant way.
    \item
      Inline assembly because it is widely used in low-level programming.
    \item
      C language because without, needless to start the project.
    \item
      Assembly language because low-level programming needs it.
  \end{itemize}

  \-

  The first three prerequisites will be coverded by dedicated courses.

  \-

  For the two languages C and assembly, we assume you already well know these
  languages.
\end{frame}

%
% c
%

\section{C}

% 1)

\begin{frame}
  \frametitle{Overview}

  To be sure the C language is not a problem for every student we
  will view in this section some fundamental uses:

  \begin{itemize}
    \item
      Shifts.
    \item
      Bit masks.
    \item
      And more generally arithmetic and logic operators.
  \end{itemize}
\end{frame}

% 2)

\begin{frame}
  \frametitle{Shift Operators}

  \begin{itemize}[<+->]
    \item
      $<<$: shift left
    \item
      $>>$: shift right
  \end{itemize}
\end{frame}

% 3)

\begin{frame}[containsverbatim]
  \frametitle{Example}

  The best examples of shift uses are either to quickly compute power of two:

  \begin{verbatim}
    int         v = 42

    v <<= 2;    /* now v is equal to 168 */
  \end{verbatim}

  or to quickly set a bit from its position without any calculation:

  \begin{verbatim}
    #define FLAG_USER           0x1
    #define FLAG_SYSTEM         0x2
    #define FLAG_DRIVER         0x4
    #define FLAG_SERVICE        0x8
  \end{verbatim}

  instead we can do:

  \begin{verbatim}
    #define FLAG_USER           (1 << 0)
    #define FLAG_SYSTEM         (1 << 1)
    #define FLAG_DRIVER         (1 << 2)
    #define FLAG_SERVICE        (1 << 3)
  \end{verbatim}

  The result is a clearer output: we directly know which bit is set.
\end{frame}

% 4)

\begin{frame}
  \frametitle{Logic Operators}

  \begin{itemize}[<+->]
    \item
      $|$: or operator.
    \item
      \&: and operator.
    \item
      \^~: xor operator.
    \item
      \~~: not operator.
  \end{itemize}
\end{frame}

% 5)

\begin{frame}[containsverbatim]
  \frametitle{Example}

  \begin{verbatim}
    unsigned int        set(unsigned int        mask,
                            unsigned char       bit)
    {
      return (mask | (1 << bit));
    }

    unsigned int      unset(unsigned int        mask,
                            unsigned char       bit)
    {
      return (mask & ~(1 << bit));
    }
  \end{verbatim}
\end{frame}

%
% assembly
%

\section{Assembly}

% 1)

\begin{frame}
  \frametitle{Overview}

  The assembly language is absolutely fundamental in low-level programming.

  \-

  The kaneton project is essentially developed using the C language but
  small parts must be written in assembly either to optimise the source
  code but this is obviously useless and unwanted; or to develop very
  special parts in relation with the processor.

  \-

  These architecture source code parts are essential and very difficult.

  \-

  For these reasons the language must not be a difficulty.
\end{frame}

% 2)

\begin{frame}
  \frametitle{Language}

  The assembly language will not be presented here because it depends
  of the architecture.

  \-

  Please refer to the dedicated course on the architectures.
\end{frame}

%
% execution context
%

\section{Execution Context}

% 1)

\begin{frame}
  \frametitle{Overview}

  A thing students should understand is that in low-level programming
  there is no execution context.

  \-

  This is very important because the students will have to create for
  example their own stack, to parse the ELF binary etc.

  \-

  To do so, every student has to perfectly understand how an address
  space is composed.
\end{frame}

% 2)

\begin{frame}
  \frametitle{Layout}

  \begin{enumerate}
    \item
      \textbf{code}: .text
    \item
      \textbf{data}: .data .rodata .bss
    \item
      \textbf{heap}
    \item
      \textbf{stack}
    \item
      \textbf{kernel}
  \end{enumerate}
\end{frame}

% 3)

\begin{frame}
  \frametitle{Stack Frames}

  Let's discuss about the stack internals and the stack frames.

  \-

  The questions are:

  \begin{itemize}
    \item
      What does the compiler/programmer do?
    \item
      What does the processor do?
  \end{itemize}
\end{frame}

\end{document}
