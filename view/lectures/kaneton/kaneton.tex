%%
%% licence       kaneton licence
%%
%% project       kaneton
%%
%% file          /home/mycure/kaneton/view/lectures/kaneton/kaneton.tex
%%
%% created       julien quintard   [sun dec  4 16:40:51 2005]
%% updated       julien quintard   [sat feb 25 02:05:25 2006]
%%

%
% template
%

\input{../../templates/lecture.tex}

%
% title
%

\title{kaneton}

%
% authors
%

\author
{
  Julien~Quintard\inst{1}
}

%
% document
%

\begin{document}

%
% title frame
%

\begin{frame}
  \titlepage

  \begin{center}
    \logos
  \end{center}
\end{frame}

%
% outline frame
%

\begin{frame}
  \frametitle{Outline}
  \tableofcontents
\end{frame}

%
% overview
%

\section{Overview}

% 1)

\begin{frame}
  \frametitle{Description}

  \begin{itemize}
    \item
      About \textbf{11} hours of course.
    \item
      Evaluated via the kaneton project.
  \end{itemize}
\end{frame}

% 2)

\begin{frame}
  \frametitle{Overview}

  Through this course we will study kernel designs from a critical
  point of view.

  \nl

  There exists many different kernels in many different kernel categories.

  \nl

  All these kernels are different, but what are these differencies?

  \nl

  This course will try to answer these questions through the
  kaneton microkernel design.

  \nl

  This course is divided in sessions, each session dealing with the
  related project. Each session tries to give students a complete view
  on kernel designers' choices.
\end{frame}

% 3)

\begin{frame}
  \frametitle{Architectures}

  This project should be developed on any architecture, the students group
  choosing its architecture.

  \nl

  Nevertheless, this is not possible for some reasons.

  \nl

  The architecture used for the kaneton project is the Intel 32-bit
  architecture.
\end{frame}

%
% k0
%

\section{k0}

% 1)

\begin{frame}
  \frametitle{Overview}

  The goal of the \textbf{k0} project is to develop a boostrap.

  \nl

  This project was introduced in the kaneton project only for
  external Intel architecture reasons.

  \nl

  Indeed, the students did not understand the different memory models
  or only in theory.

  \nl

  To make this more understandable, we decided to introduce a new project
  where students will have to deal with very low-level programming and the
  very first memory model: the Intel real mode.
\end{frame}

% 2)

\begin{frame}
  \frametitle{Assignments}

  The students just have to develop a boostrap.

  \nl

  The boostrap has three phases:

  \begin{enumerate}[<+->]
    \item
      Display some messages using BIOS interrupts facilities.
    \item
      Load the kernel from the boot device, the floppy device for example.
    \item
      Install the new memory model.
    \item
      Launch the bootloader.
  \end{enumerate}
\end{frame}

%
% k1
%

\section{k1}

% 1)

\begin{frame}
  \frametitle{Overview}

  The goal of the \textbf{k1} project is to develop a bootloader.

  \nl

  The bootloader's role is to install an execution environment for the
  kernel's futur execution.

  \nl

  In other terms, it is for example better to install the virtual memory
  and then to launch the kernel. Then the kernel will be executed with the
  virtual memory available.

  \nl

  In fact, the bootloader deals with low-level programming and generally
  installs everything needed by the kernel. Then the kernel can be launched
  and can run without taking care of low-level stuff.
\end{frame}

% 2)

\begin{frame}
  \frametitle{Info Structure}

  We decided to create a gate between the bootloader and the kernel as
  multibootloaders like grub and lilo already do.

  \nl

  Indeed, such multibootloaders provide a multiboot info structure containing
  every low-level information like the amount of physical memory, the type
  of the kernel binary, the list of the modules etc..

  \nl

  We wanted the students to understand the programming in a very strict
  environment where no memory allocator is present, where we can read and
  write the entire memory while this must be done very carefully.

  \nl

  To introduce this, we decided to build an information structure provided
  by the bootloader to the kernel. Then, everyone can write a new
  bootloader of course being compliant with this structure.
\end{frame}

% 3)

\begin{frame}
  \frametitle{Assignments}

  The students will have to deal with very low-level programming:

  \begin{itemize}[<+->]
    \item
      Install the protected mode.
    \item
      Install the virtual memory.
    \item
      Deal with the stack.
  \end{itemize}

  and to develop in a very strict environment.

  \nl

  Indeed, the information structure is extremely compact. So each group
  will have to build this structure which contains specific substructures
  like segments, regions which are dynamic data structures and modules
  which have to be located in a specific place.
\end{frame}

%
% k2
%

\section{k2}

% 1)

\begin{frame}
  \frametitle{Overview}

  The goal of the \textbf{k2} project is to develop some high level
  managers including:

  \begin{itemize}[<+->]
    \item
      id manager
    \item
      set manager
    \item
      as manager
    \item
      segment manager
  \end{itemize}

  Of course the relation with the bootloader's information structure must
  be done.
\end{frame}

% 2)

\begin{frame}
  \frametitle{id manager}

  This manager just provide an easy way to generate and more generally
  manage identifiers.

  \nl

  Moreover this manager can recycle the identifiers when necessary.

  \nl

  \textbf{kaneton} was developed using 64-bit identifiers especially not
  to care about identifiers recycling.
\end{frame}

% 3)

\begin{frame}
  \frametitle{set manager}

  The set manager is used to organise data structures contrary to other
  systems like Linux, BSD and Solaris which are composed of specific
  data structures like linked-list, trees everywhere it is necessary.

  \nl

  This design leads to a very elegant source code.

  \nl

  Nevertheless there exists inherent problems. The set manager is based
  over the malloc() function which is used to provide fine-grained memory.

  \nl

  The malloc() function needs to allocate memory so to call the segment
  and region managers, but these managers use the set manager to store their
  objects. This infinite loop is resolved by the alloc survey area provided
  by the bootloader.
\end{frame}

% 4)

\begin{frame}
  \frametitle{Nomenclature}

  \textbf{kaneton} use a very specific nomenclature.

  \nl

  In kaneton, structures are called objects when the first 64-bit field
  is used as an identifier for this object.

  \nl

  Then, the set manager use this field to organise objects into set objects.

  \nl

  Finally, a funny notice, the set manager use a set container to store
  the set object, but this set container is also a set object.
\end{frame}

% 5)

\begin{frame}
  \frametitle{as manager}

  An address space is a set of addressable addresses.

  \nl

  In \textbf{kaneton}, an address space is composed of a segment set and
  region set.

  \nl

  The segment set contains the list of the segments reserved
  for this address space and the region set contains the regions used
  to associate virtual memory with physical one.

  \nl

  Note that, once the id, set, as and segment managers will be initialised,
  the core will have to inject the segments and regions provided by the
  bootloader into the kernel address space.
\end{frame}

% 6)

\begin{frame}
  \frametitle{segment manager}

  The segment manager just provides an interface to manipulate segments
  including reservation, releasing etc..

  \nl

  The segment manager, in other terms, manipulate the physical memory.

  \nl

  Note that there exists many ways to keep track of memory usage including:

  \begin{itemize}[<+->]
    \item
      Bitmaps.
    \item
      Advanced bitmaps.
    \item
      Areas via a data structure, generally a linked-list.
    \item
      Evolved areas providing facilities to sharing and swapping.
    \item
      Buddy systems.
  \end{itemize}

  \textbf{kaneton} just use areas represented by segment object, themselves
  stored in a set object.

  \nl

  Moreover, the \textbf{kaneton} microkernel just uses a very simple first-fit
  algorithm to manage the segment set.

  \nl

  Remember the fact that \textbf{kaneton} is a pedagogic project.
\end{frame}

%
% k3
%

\section{k3}

% 1)

\begin{frame}
  \frametitle{Overview}

\end{frame}

\end{document}
