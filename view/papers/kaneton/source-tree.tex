%%
%% licence       kaneton licence
%%
%% project       kaneton
%%
%% file          /home/mycure/kaneton/view/papers/kaneton/source-tree.tex
%%
%% created       matthieu bucchianeri   [mon jan 30 17:32:40 2006]
%% updated       julien quintard   [tue mar  7 14:18:17 2006]
%%

%
% source tree
%

\chapter{Source Tree}

In this chapter we will briefly describe the kaneton microkernel reference
source tree.

This chapter can be skipped by the reader more interested in by the
kaneton microkernel reference.

\newpage

%
% text
%

The kaneton microkernel reference source tree looks like the following
listing:

\begin{verbatim}
cheat/
check/
core/
doc/
drivers/
env/
export/
libs/
licenses/
programs/
services/
tools/
view/
\end{verbatim}

We will now detail each of this subdirectory to understand how the
kaneton source tree is divided.

%
% cheat/
%

\section{cheat/}

Since the kaneton microkernel is implemented by students, the kaneton
people need to check if students are cheating on other students from
previous years or on other kernel source code available on the internet.

To avoid the cheating, kaneton people developed a software checking
for cheating between different source codes.

The \textbf{cheat} kaneton subdirectory contains everything necessary
to check for cheating including the software, the different source code
found on the internet, the kaneton students' implementation from the
previous years etc..

%
% check/
%

\section{check/}

kaneton people wanted to develop a kaneton microkernel reference but
also wanted to be sure this implementation was correct.

Indeed, the kaneton is used as a material for operating system courses and
students are currently implementing it.

kaneton people so developed a set of tools used, first, to validate the
current kaneton reference implementation making sure this implementation
works fine, second, to test the students' implementations and to evaluate
their microkernels' correctness.

The \textbf{check/} subdirectory so contains the set kaneton tools and tests.

%
% core/
%

\section{core/}

This subdirectory is the most important of the project since it contains
all the microkernel code, the bootloader code and the bootstrap code.

%
% core/bootstrap/
%

\subsection{core/bootstrap/}

This directory contains bootstraps for all supported architectures.

Indeed, this subdirectory contains a directory called \textbf{arch} which
also contains a list of directories, one per architecture. Then each
architecture directory contains the bootstrap code for this precise
architecture.

%
% core/bootloader/
%

\subsection{core/bootloader/}

This directory contains bootloaders for all supported architectures.

The same bootstrap hierarchy organization goes for the bootloader
including an \textbf{arch} directory with a list of architecture
specific directories.

%
% core/kaneton/
%

\subsection{core/kaneton/}

This directory contains the kaneton microkernel reference source code.

The directory is divided as shown below:

\begin{verbatim}
arch/
as/
conf/
debug/
id/
region/
schedule/
segment/
set/
stats/
task/
thread/
[...]
\end{verbatim}

Notice that there is one subdirectory per manager.

All architecture dependent code is placed in the \textbf{arch} subdirectory.
As for the bootstrap and the bootloader, this directory contains
subdirectories for each architecture.

Each of these subdirectories contains files implementing
architecture-dependent code for each manager.

%
% doc/
%

\section{doc/}

This directory just contains some useful documentation including
microprocessor architecture specifications, ebooks on kernels etc..

%
% drivers/
%

\section{drivers/}

This directory contains the different drivers source code.

A \textbf{driver} in the kaneton terms is a microkernel's server which
interacts with one or more hardware devices.

%
% env/
%

\section{env/}

This directory contains everything necessary to the kaneton
development environment.

The kaneton development environment allows different developers to
interact on the development of the same microkernel without difficulties.

The development environment is composed of different developers each
of them having their own user configuration file and kernel configuration
files but is also composed of different machines configuration to be able
to run the kaneton development environment on any operating system and any
architecture.

%
% export/
%

\section{export/}

The export directory contains scripts used to generate the
development environments which will be distributed to the students
at the beginning of the kaneton project.

Indeed, these scripts rearrange the kaneton hierarchy hidding some
important directories the students must not know about.

Moreover some code parts must be removed because the students will
then have to fill in these parts.

%
% libs/
%

\section{libs/}

This directory contains the libraries necessary by the kaneton microkernel
or by the kaneton servers.

Indeed, for example, this directory contains a subdirectory named
\textit{libia32}; this directory containing the whole source code of
a library for the Intel Architecture 32-bit management.

%
% licenses/
%

\section{licenses/}

This directory contains the licenses used for any programs or document
in relation with the kaneton microkernel project.

Each student have to read and accept this license before implementing
or using the kaneton microkernel.

%
% programs/
%

\section{programs/}

This directory contains the user programs running on the kaneton
microkernel.

A \textbf{program} in the kaneton terms is a task with absolutely no
system privilege.

%
% services/
%

\section{services/}

This directory contains the services source codes of the kaneton
microkernel.

A \textbf{service} in the kaneton terms is a server which only
provide a service to less privileged processes.

%
% tools/
%

\section{tools/}

This directory contains many different additional files used by
the kaneton environment development.

For example, this directory contains scripts to generate boot devices
but also contains the software used to generate the prototypes.

%
% view/
%

\section{view/}

This directory contains all the kaneton documents including kaneton
administrative documents, exams documents, lectures materials,
kaneton papers etc..

This directory is generally hidden from the student.
