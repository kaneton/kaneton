##
## copyright quintard julien
## 
## kaneton
## 
## machine.conf
## 
## path          /home/mycure/kaneton/core
## 
## made by mycure
##         quintard julien   [quinta_j@epita.fr]
## 
## started on    Fri Feb 11 02:08:31 2005   mycure
## last update   Sun Nov 13 13:06:32 2005   mycure
##

#
# ---------- information ------------------------------------------------------
# 
# this file contains the kaneton directories, librarires, binaries,
# script, tools.
#
# this file uses the makefile syntax.
#

#
# ---------- binaries ---------------------------------------------------------
#

_SHELL_			:=		/bin/bash
_CC_			:=		gcc
_MAKE_			:=		gmake
_RM_			:=		rm -f
_PURGE_			:=		$(_RM_) *~ .*~ \#* .\#*
_AR_			:=		ar cq
_RANLIB_		:=		ranlib
_CD_			:=		cd
_LD_			:=		ld
_NASM_			:=		nasm
_LN_			:=		ln -s -f
_TOUCH_			:=		touch
_WC_			:=		wc
_TAIL_			:=		tail
_TAR_			:=		tar
_LATEX_			:=		latex
_DVIPS_			:=		dvips
_PDFLATEX_		:=		pdflatex
_CP_			:=		cp
_CAT_			:=		cat
_SED_			:=		sed
_ECHO_			:=		echo
_READ_			:=		read
_LS_			:=		ls
_DATE_			:=		date
_CPP_			:=		cpp
_WHICH_			:=		which
_GREP_			:=		grep
_MTOOLS_		:=		mtools
_MCOPY_			:=		mcopy

#
# ---------- kaneton directories ----------------------------------------------
#

_MACHINES_DIR_		:=		$(_ENV_DIR_)/machines

_MACHINE_		?=						\
  $(shell $(_CAT_) $(_USER_DIR_)/user.conf				| \
          $(_SED_) -n							\
            "s/^_MACHINE_[[:space:]]*\(=\|:=\)[[:space:]]*\(.*\)$$/\2/p")

_MACHINE_DIR_		:=		$(_MACHINES_DIR_)/$(_MACHINE_)

#
# ---------- kaneton configurations files -------------------------------------
#

_MACHINE_CONF_		:=		$(_MACHINE_DIR_)/machine.conf
_MACHINE_MK_		:=		$(_MACHINE_DIR_)/machine.mk
_MACHINE_SH_		:=		$(_MACHINE_DIR_)/machine.sh

#
# ---------- conditional compilations from servers ----------------------------
#

_MODULES_		:=						\
  $(shell $(_CAT_) $(_USER_MODULES_CONF_) |				\
          $(_SED_) -n "/^[[:alpha:]_-].*/p")

_SRC_DEP_		:=						\
  $(sort								\
    $(shell $(_CAT_) $(_USER_MODULES_CONF_) |				\
            $(_SED_) -n "s/^\([[:alpha:]_-]\+\)\/.*$$/\1/p"))

_CORE_DEP_		:=						\
  $(sort								\
    $(shell $(_CAT_) $(_USER_MODULES_CONF_) |				\
            $(_SED_) -n "s/^core\/\([[:alpha:]_-]\+\)\/.*$$/\1/p"))

_DRIVERS_DEP_		:=						\
  $(sort								\
    $(shell $(_CAT_) $(_USER_MODULES_CONF_) |				\
            $(_SED_) -n "s/^drivers\/\([[:alpha:]_-]\+\)\/.*$$/\1/p"))

_SERVICES_DEP_		:=						\
  $(sort								\
    $(shell $(_CAT_) $(_USER_MODULES_CONF_) |				\
            $(_SED_) -n "s/^services\/\([[:alpha:]_-]\+\)\/.*$$/\1/p"))

_PROGRAMS_DEP_		:=						\
  $(sort								\
    $(shell $(_CAT_) $(_USER_MODULES_CONF_) |				\
            $(_SED_) -n "s/^programs\/\([[:alpha:]_-]\+\)\/.*$$/\1/p"))
