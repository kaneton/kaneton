\documentclass[10pt,a4wide]{article}
\usepackage[english]{babel}
\usepackage{a4wide}
\usepackage{graphicx}
\usepackage{graphics}
\usepackage{fancyheadings}
\pagestyle{fancy}

\bibliographystyle{plain}

\lhead{{\scriptsize kaneton project}}
\rhead{k1 subject}
\rfoot{\scriptsize EPITA System Lab}

\title{kaneton1}

\author{Julien Quintard - \small{quinta\_j@epita.fr} \\
        Jean-Pascal Billaud - \small{billau\_j@epita.fr} \\ \\
	\small{last updated by} \\
	Julien Quintard - \small{quinta\_j@epita.fr}}

\date{\today}

\begin{document}
\maketitle

\section{Informations}

\begin{tabular}{p{7cm}l}

Date de rendu: & Lundi 7 F\'evrier 2005 \`a 23h42 \\
Dur\'ee du projet: & 2 semaines \\
Nom du fichier de rendu: & k1.tar.gz \\
Responsable du projet: & Julien Quintard - \small{quinta\_j@epita.fr} \\
                       & Jean-Pascal Billaud - \small{billau\_j@epita.fr} \\
Newsgroups d\'edi\'es: & epita.kaneton, epita.adm.sr \\
Langages: & asm, C \\
Architectures: & Intel 32-bit \\
Nombre de personnes par groupes: & 3 \`a 5

\end{tabular}

\section{Introduction}

Le but du projet est de r\'ealiser un bootloader.

\paragraph{}

Etant donn\'e que vous \^etes d\'esormais \`a l'aise avec le mode r\'eel, il
est temps de manipuler correctement le mode prot\'eg\'e, bien que vous y
soyez normalement familiaris\'e.

\paragraph{}

Au del\`a de cela, le but du bootloader est d'installer un environnement
propice pour le kernel. Cela se traduit par l'installation d'un nouveau -
mais compl\'ementaire - mode d'adressage nomm\'e ``Paging''.

\paragraph{}

Pour ce projet, vous ne devez plus utiliser votre bootstrap. En effet pour
la suite du projet nous aurons besoin de plusieurs fichiers: bootloader,
kernel, modules et divers fichiers de configuration, ainsi votre bootstrap
ne sera plus appropri\'e.

\paragraph{}

Nous utiliserons donc ``grub'' qui fera office de bootstrap \'evolu\'e. Nous
vous conseillons de vous renseigner plus profond\'ement sur cet outil
afin de ma\^itriser tous ses aspects. N\'eanmoins voici les points forts
qui nous int\'eressent.

\begin{itemize}

\item ``grub'' g\`ere lui m\^eme des syst\`emes de fichiers. Cela sera tr\`es
      utile pour cr\'eer une arborescence sur le p\'eriph\'erique utilis\'e
      pour ``booter'', dans notre cas la disquette.
\item ``grub'' g\`ere plusieurs p\'eriph\'eriques: disquette, disque dur,
      r\'eseau ... Il est donc tr\`es facile de lui sp\'ecifier o\`u aller
      chercher les ``modules''.
\item Lorsque votre premier programme (nomm\'e kernel dans le fichier de
      configuration) est lanc\'e, ``grub'' vous transmet des informations
      sur le syst\`eme via une structure pr\'ed\'efinie nomm\'ee
      ``multiboot\_info\_t''.
\item Lorsque ``grub'' lance votre programme, le mode prot\'eg\'e est d\'ej\`a
      activ\'e.

\end{itemize}

\paragraph{}

La totalit\'e du projet et des suivants est \`a r\'ealis\'e en utilisant
le langage C. N\'eanmoins il est parfois impossible de se passer de
l'assembleur. Pour ces raisons nous vous autorisons \`a utiliser l'assembleur.
Attention tout de m\^eme, tout abus sera sanctionn\'e.

\section{Partie obligatoire}

Le projet consiste \`a r\'ealiser un bootloader suivant les \'etapes suivantes:

\begin{enumerate}

\item Mettre en place votre disquette pour que ``grub'' lance votre programme
      nomm\'e bootloader.
\item R\'ecuperer les informations de ``grub'' et les utiliser correctement,
      notamment: taille de la m\'emoire physique, la liste des modules
      charg\'es en m\'emoire ...
\item Installer le nouveau mode d'adressage nomm\'e ``Protected Mode''.
      Cela peut sembler inutile, mais il est pr\'ef\'erable de le faire
      au cas o\`u nous changerions de bootstrap. Attention il est inutile
      de faire quelque chose de trop complet car le code vraiment
      important se trouvera dans le kernel.
\item Afficher un message indiquant le succ\`es de la mise en place de ce
      nouveau mode d'adressage: ``protected mode''.
\item Afficher la liste des modules charg\'es avec leurs adresses en m\'emoire.
      Nous testerons avec des modules suppl\'ementaires, pensez donc \`a \^etre
      minutieux.
\item Installer la pagination de sorte que le kernel soit mapp\'e dans les
      adresses hautes - 0xc0000000 - lors de son chargement.
      Attention le kernel doit pouvoir fonctionner avec la pagination,
      c'est \`a dire qu'il doit pouvoir acc\'eder \`a son code, \`a ses
      donn\'ees et aux p\'eriph\'eriques, notamment ceux mapp\'es en m\'emoire.
      Pensez \`a utiliser un ``ld script'' pour s'assurer de l'adresse
      virtuelle du kernel: 0xc0000000.
\item ``Jumper'' sur le kernel pour lui donner la main.
\item Afficher un message dans le kernel indiquant que la pagination est
      correctement install\'ee et que le kernel tourne bien en m\'emoire haute:
      ``paging mode''.

\end{enumerate}

Durant la soutenance nous v\'erifierons que chaque \'etape a bien \'et\'e
valid\'ee et que la pagination a correctement \'et\'e install\'ee. Pour vous
aiguiller, un acc\`es m\'emoire \`a une page non existante doit g\'en\'erer
une exception: page fault.

\section{Partie bonus}

Voici les bonus pour ce projet. Comme toujours, ces bonus ne seront pris
en compte que si la partie obligatoire a \'et\'e remplie correctement.

\begin{itemize}
\item Cr\'eation d'un fichier de configuration d\'ecrivant les services \`a
      ex\'ecuter \`a l'initialisation. Ce fichier de configuration
      sera pass\'e au kernel comme module. Le kernel devra donc le parser
      pour connaitre les modules \`a lancer. Libre \`a vous d'imaginer les
      informations \`a li\'e \`a chaque module. Pour ce bonus
      nous vous demandons simplement de cr\'eer ce fichier de configuration
      et de coder les fonctions de parsing que vous int\'egrerez
      ult\'erieurement dans le kernel. Pensez donc \`a coder vos fonctions
      en cons\'equences. En effet lors de l'int\'egration de ce code
      au kernel - lorsque la gestion de la m\'emoire aura \'et\'e faite -
      vous n'aurez pas acc\`es \`a des fonctions du genre: read, mmap etc..
\end{itemize}

\section{Bibliographie}

\subsection{M\'emoire virtuelle}

\begin{itemize}
\item IA-32 Intel Architecture Software Developer's Manual Volume 3:
      System Programming Guide - Chapter 3 Protected-Mode Memory Management.
\end{itemize}

\end{document}
